"use strict";document.addEventListener("DOMContentLoaded",(function(){var n,t=document.querySelector(".grid"),e=Array.from(document.querySelectorAll(".grid div")),o=document.querySelector("#score"),r=document.querySelector("#start-button"),c=0,i=0,a=["orange","red","purple","green","blue"],s=[[[1,11,21,2],[10,11,12,22],[1,11,21,20],[10,20,21,22]],[[0,10,11,21],[11,12,20,21],[0,10,11,21],[11,12,20,21]],[[1,10,11,12],[1,11,12,21],[10,11,12,21],[1,10,11,21]],[[0,1,10,11],[0,1,10,11],[0,1,10,11],[0,1,10,11]],[[1,11,21,31],[10,11,12,13],[1,11,21,31],[10,11,12,13]]],u=4,l=0,d=Math.floor(Math.random()*s.length),f=s[d][l];function m(){f.forEach((function(n){e[u+n].classList.add("tetromino"),e[u+n].style.backgroundColor=a[d]}))}function v(){f.forEach((function(n){e[u+n].classList.remove("tetromino"),e[u+n].style.backgroundColor=""}))}function k(n){37===n.keyCode?function(){v(),f.some((function(n){return(u+n)%10==0}))||(u-=1);f.some((function(n){return e[u+n].classList.contains("taken")}))&&(u+=1);m()}():38===n.keyCode?function(){v(),(l+=1)===f.length&&(l=0);f=s[d][l],function n(t){((t=t||u)+1)%10<4?f.some((function(n){return(u+n+1)%10==0}))&&(u+=1,n(t)):t%10>5&&f.some((function(n){return(u+n)%10==0}))&&(u-=1,n(t))}(),m()}():39===n.keyCode?function(){v(),f.some((function(n){return(u+n)%10==9}))||(u+=1);f.some((function(n){return e[u+n].classList.contains("taken")}))&&(u-=1);m()}():40===n.keyCode&&L()}function L(){v(),u+=10,m(),f.some((function(n){return e[u+n+10].classList.contains("taken")}))&&(f.forEach((function(n){return e[u+n].classList.add("taken")})),d=c,c=Math.floor(Math.random()*s.length),f=s[d][l],u=4,m(),g(),function(){for(var n=0;n<199;n+=10){var r=[n,n+1,n+2,n+3,n+4,n+5,n+6,n+7,n+8,n+9];if(r.every((function(n){return e[n].classList.contains("taken")}))){i+=10,o.innerHTML=i,r.forEach((function(n){e[n].classList.remove("taken"),e[n].classList.remove("tetromino"),e[n].style.backgroundColor=""}));var c=e.splice(n,10);(e=c.concat(e)).forEach((function(n){return t.appendChild(n)}))}}}(),f.some((function(n){return e[u+n].classList.contains("taken")}))&&(o.innerHTML="end",clearInterval(n),document.removeEventListener("keyup",k)))}document.addEventListener("keyup",k);var h=document.querySelectorAll(".mini-grid div"),y=[[1,5,9,2],[0,4,5,9],[1,4,5,6],[0,1,4,5],[1,5,9,13]];function g(){h.forEach((function(n){n.classList.remove("tetromino"),n.style.backgroundColor=""})),y[c].forEach((function(n){h[0+n].classList.add("tetromino"),h[0+n].style.backgroundColor=a[c]}))}r.addEventListener("click",(function(){n?(clearInterval(n),n=null):(m(),n=setInterval(L,1e3),c=Math.floor(Math.random()*s.length),g())}))}));